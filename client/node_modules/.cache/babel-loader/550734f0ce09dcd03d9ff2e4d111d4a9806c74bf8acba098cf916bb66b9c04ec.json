{"ast":null,"code":"import axios from 'axios';\nconst apiClient = axios.create({\n  baseURL: 'http://localhost:8080',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nexport const getFiles = async path => {\n  try {\n    // Sanitize path: remove leading/trailing slashes and prevent '..' traversal\n    const sanitizedPath = path.replace(/^\\/+|\\/+$/g, '') // Remove leading/trailing slashes\n    .replace(/\\.\\./g, ''); // Prevent directory traversal\n    console.log('Sending path to backend:', sanitizedPath);\n    const response = await apiClient.get('/api/files', {\n      params: {\n        path: sanitizedPath || '' // Send empty string for root\n      }\n    });\n    return response.data;\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      var _error$response, _error$response$data, _error$response2;\n      const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message || 'Request failed';\n      console.error('API Error:', ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n      throw new Error(message);\n    }\n    console.error('Unexpected error:', error);\n    throw new Error('An unexpected error occurred');\n  }\n};","map":{"version":3,"names":["axios","apiClient","create","baseURL","timeout","headers","getFiles","path","sanitizedPath","replace","console","log","response","get","params","data","error","isAxiosError","_error$response","_error$response$data","_error$response2","message","Error"],"sources":["C:/Users/Huisan/IdeaProjects/FileNavigator/client/src/api/fileApi.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nexport interface FileItem {\r\n    name: string;\r\n    type: 'file' | 'directory';\r\n    size: number;\r\n    modified: string;\r\n    created?: string;\r\n}\r\n\r\nconst apiClient = axios.create({\r\n    baseURL: 'http://localhost:8080',\r\n    timeout: 10000,\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n    },\r\n});\r\n\r\nexport const getFiles = async (path: string): Promise<FileItem[]> => {\r\n    try {\r\n        // Sanitize path: remove leading/trailing slashes and prevent '..' traversal\r\n        const sanitizedPath = path\r\n            .replace(/^\\/+|\\/+$/g, '') // Remove leading/trailing slashes\r\n            .replace(/\\.\\./g, '');     // Prevent directory traversal\r\n        console.log('Sending path to backend:', sanitizedPath);\r\n        const response = await apiClient.get<FileItem[]>('/api/files', {\r\n            params: {\r\n                path: sanitizedPath || '' // Send empty string for root\r\n            },\r\n        });\r\n        return response.data;\r\n    } catch (error) {\r\n        if (axios.isAxiosError(error)) {\r\n            const message = error.response?.data?.message || error.message || 'Request failed';\r\n            console.error('API Error:', error.response?.data || error.message);\r\n            throw new Error(message);\r\n        }\r\n        console.error('Unexpected error:', error);\r\n        throw new Error('An unexpected error occurred');\r\n    }\r\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAUzB,MAAMC,SAAS,GAAGD,KAAK,CAACE,MAAM,CAAC;EAC3BC,OAAO,EAAE,uBAAuB;EAChCC,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE;IACL,cAAc,EAAE;EACpB;AACJ,CAAC,CAAC;AAEF,OAAO,MAAMC,QAAQ,GAAG,MAAOC,IAAY,IAA0B;EACjE,IAAI;IACA;IACA,MAAMC,aAAa,GAAGD,IAAI,CACrBE,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;IAAA,CAC1BA,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,CAAK;IAC/BC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEH,aAAa,CAAC;IACtD,MAAMI,QAAQ,GAAG,MAAMX,SAAS,CAACY,GAAG,CAAa,YAAY,EAAE;MAC3DC,MAAM,EAAE;QACJP,IAAI,EAAEC,aAAa,IAAI,EAAE,CAAC;MAC9B;IACJ,CAAC,CAAC;IACF,OAAOI,QAAQ,CAACG,IAAI;EACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZ,IAAIhB,KAAK,CAACiB,YAAY,CAACD,KAAK,CAAC,EAAE;MAAA,IAAAE,eAAA,EAAAC,oBAAA,EAAAC,gBAAA;MAC3B,MAAMC,OAAO,GAAG,EAAAH,eAAA,GAAAF,KAAK,CAACJ,QAAQ,cAAAM,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBH,IAAI,cAAAI,oBAAA,uBAApBA,oBAAA,CAAsBE,OAAO,KAAIL,KAAK,CAACK,OAAO,IAAI,gBAAgB;MAClFX,OAAO,CAACM,KAAK,CAAC,YAAY,EAAE,EAAAI,gBAAA,GAAAJ,KAAK,CAACJ,QAAQ,cAAAQ,gBAAA,uBAAdA,gBAAA,CAAgBL,IAAI,KAAIC,KAAK,CAACK,OAAO,CAAC;MAClE,MAAM,IAAIC,KAAK,CAACD,OAAO,CAAC;IAC5B;IACAX,OAAO,CAACM,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;IACzC,MAAM,IAAIM,KAAK,CAAC,8BAA8B,CAAC;EACnD;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}